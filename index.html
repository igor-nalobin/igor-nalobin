<!DOCTYPE html>
<html>
<head>
    <title>Резюме Игоря Налобина</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui.min.css">
    <style>
        body { margin: 0; padding: 20px; background: #fafafa; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #333; }
        .swagger-ui .opblock-summary-path { max-width: 600px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Резюме Игоря Налобина в формате API</h1>
        <p>Пиар-менеджер, Санкт-Петербург | <a href="https://t.me/nalobin_igor" target="_blank">@nalobin_igor</a></p>
    </div>
    
    <div id="swagger-ui"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui-standalone-preset.min.js"></script>
    <script>
        window.onload = function() {
            // Конфигурация спецификации
            const spec = {
                "openapi": "3.0.0",
                "info": {
                    "title": "Резюме API",
                    "version": "1.0.0",
                    "description": "API с профессиональной информацией Игоря Налобина"
                },
                "servers": [
                    {
                        "url": "https://raw.githubusercontent.com/igor-nalobin/igor-nalobin/main/data",
                        "description": "Основной сервер с данными резюме"
                    }
                ],
                "paths": {
                    "/about.json": {
                        "get": {
                            "summary": "Основная информация",
                            "description": "Получить личную и контактную информацию",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {"type": "string", "example": "Игорь Налобин"},
                                                    "profession": {"type": "string", "example": "Пиар-менеджер"},
                                                    "email": {"type": "string", "example": "nalobin.igor@gmail.com"},
                                                    "location": {"type": "string", "example": "Санкт-Петербург"}
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/skills.json": {
                        "get": {
                            "summary": "Профессиональные навыки",
                            "description": "Получить список профессиональных навыков",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {"type": "string"},
                                                "example": [
                                                    "Продвижение в социальных сетях",
                                                    "Копирайтинг",
                                                    "Организация мероприятий"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/experience.json": {
                        "get": {
                            "summary": "Опыт работы",
                            "description": "Получить историю профессионального опыта",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "company": {"type": "string"},
                                                        "position": {"type": "string"},
                                                        "period": {"type": "string"},
                                                        "description": {"type": "string"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/education.json": {
                        "get": {
                            "summary": "Образование",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "university": {"type": "string"},
                                                        "faculty": {"type": "string"},
                                                        "degree": {"type": "string"},
                                                        "period": {"type": "string"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/languages.json": {
                        "get": {
                            "summary": "Языки",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "language": {"type": "string"},
                                                        "level": {"type": "string"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            };

            // Инициализация Swagger UI
            const ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                layout: "StandaloneLayout",
                requestInterceptor: (request) => {
                    // Добавляем заголовки для обхода CORS
                    request.headers.Origin = window.location.origin;
                    request.headers.Referer = window.location.href;
                    
                    // Добавляем параметр для избежания кэширования
                    if (request.url.includes('raw.githubusercontent.com')) {
                        const separator = request.url.includes('?') ? '&' : '?';
                        request.url += `${separator}nocache=${Date.now()}`;
                    }
                    
                    return request;
                },
                responseInterceptor: (response) => {
                    // Убедимся, что ответ обрабатывается как JSON
                    if (response.url.includes('.json') && typeof response.body === 'string') {
                        try {
                            response.body = JSON.parse(response.body);
                        } catch (e) {
                            console.error('Error parsing JSON response', e);
                        }
                    }
                    return response;
                }
            });
        }
    </script>
</body>
</html>