<!DOCTYPE html>
<html>
<head>
    <title>Igor Nalobin, System analyst</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui.min.css">
    <style>
        body { margin: 0; padding: 20px; background: #fafafa; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #333; }
        .swagger-ui .opblock-summary-path { max-width: 600px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>API CV</h1>
        <p>System analyst, Tyumen | <a href="https://t.me/IngVarrr" target="_blank">@https://t.me/IngVarrr</a></p>
    </div>
    
    <div id="swagger-ui"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.35.0/swagger-ui-standalone-preset.min.js"></script>
    <script>
        window.onload = function() {
            // Конфигурация спецификации
            const spec = {
                "openapi": "3.0.0",
                "info": {
                    "title": "API CV",
                    "version": "1.0.3",
                    "description": "API with professional information"
                },
                "servers": [
                    {
                        "url": "https://raw.githubusercontent.com/igor-nalobin/igor-nalobin/main/data",
                        "description": "main server"
                    }
                ],
                "paths": {
                    "/about.json": {
                        "get": {
                            "summary": "Main information",
                            "description": "Get personal and contact information",
                            "responses": {
                                "200": {
                                    "description": "Ok",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {"type": "string", "example": "Clark Kent"},
                                                    "profession": {"type": "string", "example": "Journalist"},
                                                    "email": {"type": "string", "example": "sups@krypt.on"},
                                                    "location": {"type": "string", "example": "Metropolis"}
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/skills.json": {
                        "get": {
                            "summary": "Professional skills",
                            "description": "Get a list of professional skills",
                            "responses": {
                                "200": {
                                    "description": "Ok",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {"type": "string"},
                                                "example": [
                                                    "Flight",
                                                    "X-ray vision",
                                                    "Superhuman strength"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/experience.json": {
                        "get": {
                            "summary": "Experience",
                            "description": "Get experience",
                            "responses": {
                                "200": {
                                    "description": "Ok",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "company": {"type": "Daily Planet"},
                                                        "position": {"type": "Journalist"},
                                                        "period": {"type": "Late 20s–now"},
                                                        "description": {"type": "Wears glasses, writes arcticles, saves the world"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/education.json": {
                        "get": {
                            "summary": "Education",
                            "description": "Get education",
                            "responses": {
                                "200": {
                                    "description": "Ok",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "university": {"type": "Kryptonopolis University"},
                                                        "faculty": {"type": "How to be a Superman"},
                                                        "degree": {"type": "Master's degree"},
                                                        "period": {"type": "Unknown"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/languages.json": {
                        "get": {
                            "summary": "Языки",
                            "responses": {
                                "200": {
                                    "description": "Успешный ответ",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "language": {"type": "Kryptonian"},
                                                        "level": {"type": "Native speaker"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            };

            // Инициализация Swagger UI
            const ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                layout: "StandaloneLayout",
                requestInterceptor: (request) => {
                    // Добавляем заголовки для обхода CORS
                    request.headers.Origin = window.location.origin;
                    request.headers.Referer = window.location.href;
                    
                    // Добавляем параметр для избежания кэширования
                    if (request.url.includes('raw.githubusercontent.com')) {
                        const separator = request.url.includes('?') ? '&' : '?';
                        request.url += `${separator}nocache=${Date.now()}`;
                    }
                    
                    return request;
                },
                responseInterceptor: (response) => {
                    // Убедимся, что ответ обрабатывается как JSON
                    if (response.url.includes('.json') && typeof response.body === 'string') {
                        try {
                            response.body = JSON.parse(response.body);
                        } catch (e) {
                            console.error('Error parsing JSON response', e);
                        }
                    }
                    return response;
                }
            });
        }
    </script>
</body>
</html>